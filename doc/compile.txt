 コンパイル数恕


ˇUNIX惧でのコンパイルの眷圭

  src/makefileを蝗います。また、コンパイルにはANSI C(毋えばgcc)が涩妥で
  す。コンパイル缄界は笆布の奶りです。

  1) srcディレクトリ布に败る
  2) 涩妥に炳じてmakefileをいじる(悸狠には、いじる涩妥のある眷圭は驴くない
     と蛔います)。gcc笆嘲のC借妄废を网脱の眷圭は、CCおよびCFLAGSの年盗を
     努磊に恃构して布さい。また、CONFIGSで年盗材墙なコンパイルスイッチの
     罢蹋は布に淡します。インスト〖ル黎のディレクトリ(BINDIR, MANDIR)もお
     攻みに炳じて恃构して布さい。ただし、そこに回年したディレクトリが贷赂
     である涩妥があります。
  3) make	∧うまくできなかったらソ〖スを努倒饯赖して布さい^^;
  4) make install(涩妥に炳じてsuしてから)


ˇWin32惧のegcs(mingw32)でコンパイル(Win32コンソ〖ル惹を侯喇)する眷圭

  src/makefile.egcをmakefileにリネ〖ムして蝗って布さい。


ˇMS-DOS惧のBorland C∈bcc∷でコンパイルする眷圭

  src/makefile.bcc をmakefileにリネ〖ムして蝗って布さいˉ
  ∈办婶アセンブラを蝗っていますのでTASMが涩妥です∷
  票涵のDOS惹バイナリはbccでコンパイルしたものです。


ˇMS-DOS惧のLSI C-86活咯惹でコンパイルする眷圭

  v5.27からLSI C-86活咯惹でコンパイル材墙になっています。コンパイルする
には、src/makefile.lccをmakefileにリネ〖ムして蝗って布さい。缄傅では、
v3.30c活咯惹でコンパイルできることを澄千しています。なお、票活咯惹はスモ〖
ルモデルである簇犯惧、票活咯惹でmakeしたmml2midは、あまり络きなMMLファイ
ルはコンパイルできない材墙拉があります。
  LSI C-86活咯惹の眷圭、リンク箕にスタックサイズをデフォルト(2500バイト)
よりある镍刨络きくしてやらないと、コンパイルはできても赖撅に瓢侯しません
(驴くのファイルではちゃんと瓢くように斧えても、办婶のファイルで佰撅瓢侯
したりします)。藕烧のmakefile.lccではスタックサイズを6kバイトに回年して
います。瓢侯がおかしい眷圭、lccの-hオプション(スタックサイズのチェックを
乖う)をオンにして浩コンパイルして、スタック邦れが弹きていないか澄かめる
とよいかも梦れません。
  (庙) LSI C-86活咯惹のサポ〖トは活赋弄なもので、经丸の惹は浩び、票活咯
惹ではコンパイルできなくなるかも梦れません。


ˇmakefile面で年盗材墙なコンパイルスイッチとその罢蹋

  布淡のスイッチを、涩妥に炳じて称makefile面のCONFIGSマクロの年盗に裁え
  て布さい。

  -DUSE_NONMINUS_OPTS ∧ これを年盗すると笆布の泼毋が铜跟になります。
      ˇコマンド苞眶のうち、MMLファイル叹の肌の苞眶が2矢机笆布なら、それ
	とそれ笆惯の苞眶は≈-∽の铜痰に簇わらず链てオプション苞眶と斧な
	される
      ˇMIDIファイル叹より稿の苞眶が≈-∽で幌まっていなくてもエラ〖には
	ならず、それらは痰掘凤にオプション苞眶胺いされる
  -DCASE_INSENSITIVE_OPTS ∧ オプションスイッチの络矢机井矢机を惰侍しな
    いようになります。
  -DDEFAULT_MSCODE ∧ MMLファイル柒の矢机误のコ〖ドとしてMS戳机コ〖ド(シ
    フトJIS)を簿年するのをデフォルトにします。この年盗がない眷圭、矢机误
    のコ〖ドとしてEUCコ〖ドを簿年するのがデフォルトになります。DOS惹およ
    びWin32惹はこれを年盗してmakeされています(makefile.bcc, makefile.egc
    にもこの年盗が崔まれています)。
  -DNONANSI_REALLOC ∧ お蝗いのCコンパイラのrealloc(), free()がANSI Cの
    惮呈に洁凋していない眷圭に年盗します。ANSI Cでは、realloc()の妈1苞眶
    にNULLを畔したり、free()の苞眶にNULLを畔したりしても赖撅に瓢侯するこ
    とを年めており、塑ソ〖スもそれを涟捏としています。そうでないコンパイ
    ラを网脱する眷圭は、このスイッチを年盗して布さい。
  -DNO_MEMMOVE ∧ お蝗いのCコンパイラに簇眶memmove()がない眷圭に年盗して
    布さい。
  -DMSG_TO_STDOUT ∧ これを年盗すると、称硷メッセ〖ジがstderrでなくstdout
    に叫蜗されます。DOS惹およびWin32惹はこれを年盗してmakeされています
    (makefile.bcc, makefile.egcにもこの年盗が崔まれています)。


ˇソ〖スについて笺闯庙淡

  アセンブリ咐胳ファイル(file.asm)がありますが、これはDOS惧のBorland Cで
コンパイルする眷圭しか蝗われません。UNIX惹、Win32コンソ〖ル惹は链てCで今
かれていますので、アセンブラを妄豺してなくても猖陇は材墙ですよ(^_^)
  また、ちょっと寒宛しやすいのですが、Win32コンソ〖ル惹をコンパイルする
眷圭も -DUNIX のコンパイルスイッチが年盗されます(嫡に -DWINDOWS は年盗さ
れません)。POSIX高垂のライブラリを捏丁しているegcsによって、UNIX脱の淡揭
をほぼそのまま萎脱してコンパイルしているためです。
  #ifdef WINDOWSの婶尸は、附哼倡券面们面のWindows GUI惹のための淡揭です
(この惹は、Windows漓脱の婶尸のソ〖スは给倡されていません)。
