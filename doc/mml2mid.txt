
							1993/2/7
							2001/4/24 构糠
	      mml2mid Version 5.30b 网脱の缄苞
							     嚏拍肚客
							     疲版建践
							     辊拍底沦
							     糠叫景欠

1. はじめに

  mml2midは·MMLファイルをコンパイルしてMIDIファイルに恃垂するツ〖ルです。

  MML(Music Macro Language)という不弛を淡揭する咐胳で今かれたテキスト
ファイルを·筛洁MIDIファイル(FORMAT 0 および 1)に恃垂しますˉ

  mml2midでは逄泰なデ〖タ侯喇を材墙とするために·侯荚がMMLによる虑ち哈みを
乖ってきた墓钳の沸赋を宠かして·MIDIデ〖タの侯喇に努した慌屯を疯年しましたˉ
骄丸のMMLドライバ PMD, MUSIC LALF, FSD, MUZAX, MDD, FPD などの慌屯を徊雇に
しています。


∈ⅷ  笆布、nおよびn1,n2,n3∧∧は眶猛を山しますˉ∷


2. 蝗脱数恕

  mml2mid では·回年された MMLファイルを·MIDファイルに恃垂しますˉ

  弹瓢数恕は·

	mml2mid [オプションスイッチ] MMLファイル叹 [MIDファイル叹]

  ですˉ

  笆布にオプションスイッチの慌屯を绩しますˉ

	-f  FORMAT0のファイルを叫蜗するˉ∈ディフォルトではFORMAT1の
	   ファイルが叫蜗されます∷
	-tn 链挛をnだけトランスポ〖ズ∈败拇∷させるˉ
	   ただし、稿で棱汤しますが'RT'の烧いているトラックはトランスポ〖ズ
	   しませんˉ
	-x  オクタ〖ブの惧げ布げ > , < の跟蔡を嫡にする。
	-v  ベロシティの惧げ布げ ) , ( の跟蔡を嫡にする。
	-m  MMLファイル面の矢机误を≈MS戳机コ〖ド(シフトJIS)ではない∽と
	    冉们するかどうかを瓤啪する。
	-w  MMLファイル面に妄豺できない矢机が附れた眷圭、エラ〖とせずに
	    焚桂だけしてその矢机を痰浑し、コンパイルを鲁乖する。
	-c  概いバ〖ジョンのmml2midに赂哼した、ドキュメントに今かれて
	    いなかった笆布の2つの慷る神いを滔曙する。
		1) MMLファイル面の、乖片が鄂球の乖は庙坚乖と斧なす(涟の乖
		   からの费鲁乖は近く)。
		2) ≈/* */∽による庙坚が誓じていなくてもエラ〖としない。

  -t笆嘲の称オプションはトグルˇスイッチになっていて、饿眶搀回年すると傅に
  提ります。
  茨董恃眶MML2MID_OPTIONSにオプションスイッチを回年しておくこともできます。

  (-mオプションに簇する输庙)
    mml2midでは、MMLファイル面の矢机误柒(≈" "∽の面)の≈\∽は、稿揭のように
  泼侍な胺いを减けますが、MS戳机コ〖ドでは泣塑胳矢机の2バイト誊に≈\∽と
  票じコ〖ドが寒じることがあります。そのため、矢机误柒にMS戳机コ〖ドが
  蝗われているのにmml2midが≈矢机误はMS戳机コ〖ドでない∽と蛔ったり、
  あるいはその嫡が弹きたりすると、疙瓢侯を苞き弹こす眷圭があります。
  -mは、それを搀闰するために涩妥となるオプションです。
    mml2midはデフォルトでは、DOS惹/Windows惹は≈矢机误はMS戳机コ〖ドである∽
  と簿年し、UNIX惹は≈矢机误はMS戳机コ〖ドでない∽と簿年します。-mオプション
  は、この簿年を瓤啪します。
    骄って、MS戳机コ〖ドで今かれたMMLファイルをUNIX惹mml2midでコンパイルする
  眷圭と、MS戳机コ〖ドでないMMLファイルをDOS/Windows惹mml2midでコンパイルする
  眷圭は、-mオプションを回年しないと、矢机误によっては疙瓢侯する眷圭があり
  ます(むろん、たまたま赖撅瓢侯する眷圭もあります)。
    奶撅の蝗脱(DOS茨董で、矢机コ〖ドにMS戳机コ〖ドを蝗っている眷圭など)では
  回年の涩妥はないでしょう。
    なお、矢机误にISO-2022-JP(炉疚≈JISコ〖ド∽)などのコ〖ドを蝗うことは
  海のところできません。MS戳机コ〖ドか泣塑胳EUCなどを蝗って布さい。また、
  矢机误柒と庙坚笆嘲には泣塑胳矢机は今けません。今くと赖撅瓢侯しないおそれが
  あります。

[悸乖毋]
	毋1¨ mml2mid -t2 sample.mml sample.mid
	毋2¨ mml2mid -f sample.mml
	毋3¨ mml2mid -f -x -t5 sample.mml
	毋4¨ mml2mid -fxt5 sample.mml

  掐蜗ファイル叹の橙磨灰≈.mml∽は臼维できます。毋えば掐蜗ファイル叹が
≈sample.mml∽の眷圭、≈sample∽と回年することができます。芒しその眷圭、
≈sample∽というファイルが侍にあった眷圭はそちらの数が粕まれます。
  叫蜗ファイル叹を臼维することもできます。その眷圭、掐蜗ファイル叹の橙磨
灰を≈.mid∽に恃えた叹のファイルが、叫蜗ファイルとなります。
  掐蜗ファイル叹を≈-∽と回年すると、MML掐蜗を筛洁掐蜗から粕みます(bccで
コンパイルされているDOS惹を近く)。この眷圭、叫蜗ファイル叹を维すると、筛洁
叫蜗に叫蜗します(UNIX惹のみ。その戮の眷圭はエラ〖)。
  叫蜗ファイル叹を≈-∽と回年すると、MIDI叫蜗は筛洁叫蜗へ叫ます(UNIX惹のみ)。
ただし、眉琐には叫蜗できません。ファイルやパイプへリダイレクトして布さい。

  なお、mml2midはコンパイルの狠に、タイトルや称チャンネルの另ステップ眶
などの攫鼠を叫蜗します。これは、UNIX惹では筛洁エラ〖叫蜗へ、DOS/Windows惹
では筛洁叫蜗へ叫ます。UNIX惹笆嘲でMIDI叫蜗を筛洁叫蜗に叫せないようになって
いるのは、このためです。


3. MMLの慌屯

  笆布でMMLの慌屯について棱汤しますˉ
  いままでMMLを蝗ったことがないという客にとっては、络恃尸かりにくいかと
蛔いますので·办奶り誊を奶した稿でサンプルMMLを徊雇にすることをお传めしますˉ


3.1 MMLファイル链挛の菇喇

  mml2midにおけるMMLファイルは·年盗乖·マクロ乖·MML乖·の3硷梧の乖から
菇喇されますˉ拒しくは稿で棱汤しますが·ここでは·车维だけ疽拆しますˉ

ˇ年盗乖は·'#' で幌まる乖ですˉ
  妒のタイトルやタイムベ〖スを淡揭したり·嘲婶ファイルを粕み哈みますˉ

[毋]
#title"Catch Me Tonight"
#copyright"(c) Akito Monden"
#timebase 48
#include "def.mml"

ˇマクロ乖は·'$'で幌まる乖ですˉ
  稿で帆り手し钙び叫して蝗うマクロと钙ばれる乖を淡揭しますˉ
  ドラムの称弛达に充り碰てると守网です。
  ∈Jコマンドを蝗うとドラム不咖の回年が弛になります。稿ほどJコマンドの
  棱汤をご枉布さい∷

[毋]
$k  k100 J36  ; kick
$s  k105 J38  ; snare
$h  k70  J44  ; hihat
$2h k70  J42  ; hihat2


ˇMML乖は·布の毋のように·'A', '1A' などのトラック叹で幌まる乖ですˉ
  不射やプログラムチェンジなどのMMLコマンドを淡揭しますˉ

[毋]
A C1 @17 v110 k110 q6 o5 l8  p64
B C2 @38 v97  k100 q3 o1 l16 p64
A f2^8fga->c4<b-4b-.a-.gq0f16(10g16)10q6f1-8r1
B [f8.fr8a-4a-8c8e-8 e-(4e-8)4e-r8g4g8<g8b-8>]4


  なお、MMLファイル面では乖片の鄂球は痰浑されます。
  笆惯では、年盗乖·マクロ乖·MML乖のそれぞれについて、
拒しく棱汤していきます。


3.2 年盗乖

#title "矢机误"
  妒叹を回年しますˉ呵络矢机眶は染逞矢机で255矢机ですˉ
  奶撅·ファイルの黎片に今いておきますˉ

  矢机误では、肌のような山淡が蝗えます。
      \034			  ∧8渴眶で034の矢机
      \x4a			  ∧16渴眶で4aの矢机
      \n, \t, \b, \r, \f, \a, \v  ∧C咐胳と票じ
      \e			  ∧\033と票じ
      \の肌に惧淡笆嘲の矢机	  ∧その矢机そのもの
  なお、これらはtitleだけでなく、MMLファイル面の≈" "∽で跋まれた矢机误办忍
  に铜跟です。
  リタ〖ン(猖乖コ〖ド)を矢机误の面に木儡掐れることはできません。掐れたい
  眷圭は≈\n∽と山淡して布さい。また、矢机误を誓じる≈"∽を臼维することは
  できません(エラ〖になります)。

#copyright "矢机误"
  螟侯涪山绩を淡揭します。
  筛洁MIDIファイルの妈１トラックにコピ〖ライト淡揭が掐ります。
  SMFメタイベント FF 02 により叫蜗されます。

#timebase n
  タイムベ〖ス(4尸不射の尸豺墙)を回年しますˉ
  #timebase の淡揭を臼维した眷圭には n = 48 となりますˉ
  nの猛は·48, 60, 80, 96, 120, 160, 240, 480 が回年材墙ですˉ
  奶撅は·n = 48 で啼玛ないと蛔いますˉ

[毋]
  n = 48 (#timebase 48)の眷圭·4尸不射の墓さを48ステップに回年しますˉ
  その戮の不墓は·毋えば·肌のようなステップ眶になりますˉ
  2尸不射  = 96ステップ
  8尸不射  = 24ステップ
  16尸不射 = 12ステップ
  32尸不射 = 6ステップ
  64尸不射 = 3ステップ

#include "ファイル叹"
  この眷疥に回年したファイルを粕み哈みますˉ
  C咐胳の#include矢とほぼ票じです。

  いろいろな妒でよく蝗うExclusiveなどの肋年を侍ファイルにまとめておいて·
  #includeで粕み哈むようにすると守网ですˉ

[庙罢]
  ≈#include "c:\mml\common.mml"∽などとすると袋略奶りの瓢侯はしません。
  矢机误面の≈\∽が、#titleの灌で棱汤したような泼侍な胺いを减けるためです。
  ≈#include "c:/mml/common.mml"∽あるいは≈#include "c:\\mml\\common.mml"∽
  などのようにして布さい。

#swap<>
  オクタ〖ブの惧げ布げ≈>∽≈<∽の跟蔡を嫡にします。饿眶搀回年すると傅に提り
  ます。ファイル面のどこか1舱疥で回年すると链挛に铜跟です(渡疥弄に≈<∽≈>∽
  を掐れ垂えるなどのことはできません)。

#swap()
  ベロシティの惧げ布げ≈)∽≈(∽の跟蔡を嫡にします。饿眶搀回年すると傅に提り
  ます。#swap<>と票屯、ファイル面のどこか1舱疥で回年すると链挛に铜跟です。

#german
  ドイツ萎の不叹を蝗います。hがシ、bがシのフラットになります。この离咐が
  ない眷圭、bがシで、hはエラ〖になります。これも、ファイル面のどこか1舱
  疥で回年すると链挛に铜跟です。

#xtempo n
  妒链挛のテンポをn/100擒します。剩眶搀回年しても呵稿のものだけがファイル
  链挛に铜跟で、婶尸弄にテンポの擒唯を恃えたりはできません。

#bc525
  ver5.26でそれまでとコンパチブルでなくなった办婶のMMLコマンドについて、
  瓢侯を笆涟とコンパチブルに提します。
  ver5.25まではMMLコマンド≈*∽が≈__∽と票じ罢蹋でしたが、5.26からは
  ≈*∽は不射の稿に烧くナチュラルの罢蹋になります。また、5.25までは
  不射の稿に≈-∽を2つ烧けた眷圭、1つ誊はフラット、2つ誊は筛洁の不墓
  からの苞き换の罢蹋でしたが、5.26からは2つのフラットになります。これら
  について、5.25までの瓢侯に提します。


3.3 マクロ乖

  $a×$zで幌まる乖ですˉマクロ乖はMML乖から·$a×$zを回年することにより·
钙び叫すことができます。

[毋]
$a c8cc		; マクロ乖
$b cccccccc	; マクロ乖

ⅷ Ver5.05からは、マクロの眶が１０擒に笼えました。
   $1a×$9a, $1b×$9b, $1c×$9c, ∧, $1z×$9z が蝗えます。
   $0a,$0b,$0c,∧,$0z は、$a,$b,$c,∧,$z と票じ胺いになります。

ⅷ Ver5.05からは、マクロ柒で侍のマクロを钙び叫すことも材墙になりました。
   ただし、钙び叫される数のマクロを黎に回年しておく涩妥があります。


A C3 @115 [$a]7$b[[$a]3:cccc]2ggee	; この乖でマクロを钙び叫している
| |  |
| |  不咖戎规115の回年
| |
| MIDIチャンネル3の回年
|
トラック0Aの回年

  なお·奠バ〖ジョンでは·マクロ乖は·マクロを钙び叫す乖よりも涟に弥く
涩妥がありましたが·Ver5.00笆惯では·マクロ乖はファイル面のどこにあっても
かまいません。∈ただし、マクロ柒から侍のマクロを钙び叫す眷圭に嘎り、
钙び叫される数のマクロを黎に今いておく涩妥があります∷

ⅷ マクロ柒のル〖プ(≈[ ]∽)は、マクロが钙び叫される箕爬ではなく年盗され
   る箕爬で鸥倡されます。骄って、マクロ柒で蝗うル〖プは(搀眶回年も崔めて)
   マクロ柒で窗冯していなければなりません。毋えば

$a [cde]
A $a3

   のようなことはできません。これは

$a cde
A [$a]3

   あるいは

$a [cde]3
A $a

   のように今く涩妥があります。

ⅷ ≈" "∽で跋まれた矢机误の面ではマクロ鸥倡が乖われません。しかし、マク
   ロの年盗柒推を矢机误にすることはできます。

[毋]
$a "violin"
A  C1"1st."+$a ∧
B  C2"2nd."+$a ∧

   これでAトラックのトラック叹は≈1st.violin∽になります。(≈+∽は矢机误
   の息儡です。≈Cn"矢机误"∽コマンドの灌徊救)


3.4 MML乖

  MML乖は·トラック叹と·その稿に鲁くMMLコマンド误から菇喇されますˉ
  トラックヘッダの淡揭の妨及は·Version 5.00α から络升に恃构されましたˉ
  (骄丸奶りの回年も材墙ですˉ)
  さらに、Ver5.00から、骄掳トラックの车前が瞥掐されました。

[毋]
AC @120 v100 k100 o4 f2^8fga->c4<b-4b-.a-.gq0f16(10g16)10q6f1-8r1
B [f8.fr8a-4a-8c8e-8 e-(4e-8)4e-r8g4g8<g8b-8>]4
D  [fcfga-fa-b->cfc<b-a->c<a-g e-<b->e-fge-ga-b->e-<b-a-gb-ge-]4
|   |
|  MMLコマンド误
|
トラック叹

  トラック叹とMMLコマンド误との粗には·鄂球·または·タブを1改笆惧
  掐れて布さいˉ

  笆惯では·トラック叹·および·MMLコマンド误について·界戎に棱汤しますˉ


3.4.1 トラック叹

  乖の黎片に·トラック叹を淡揭しますˉ

  トラックには、2硷梧あります。
  1つは、肩トラック∈A×Z∷です。
  もう1つは、骄掳トラック∈1A×1Z, 2A×2Z, 3A×3Z, ∧, 9A×9Z∷です。

[毋]
A   ∧∧ 肩トラック
1A  ∧∧ トラックAの骄掳トラック1
2A  ∧∧ トラックAの骄掳トラック2
3A  ∧∧ トラックAの骄掳トラック3

肩トラックは、妥するに舍奶のトラックです。奶撅、1つの肩トラックには1つの
弛达が充り碰てられると雇えてください。

ˇ肩トラックは、事误山淡が材墙ですˉ

[毋]
AE f2^8fga->c4<b-4b-.a-.gq0f16(10g16)10q6f1-8r1
FG f8.fr8a-4a-8c8e-8 e-(4e-8)4e-r8g4g8<g8b-8>

ˇトラック叹は、ワイルドカ〖ド'?'による回年も材墙です。
  '?'は'ABCDEFGHIJKLMNOPQRSTUVWXYZ'を山します。

[毋]
? cdefg   ∧∧ A×Z链てのトラックに cdefg を今いたのと票じです。
1? cdefg  ∧∧ 1A×1Z链てのトラックに cdefg を今いたのと票じです。
?1? cdefg ∧∧ A×Z,1A×1Z链てのトラックに cdefg を今いたのと票じです。

--------------------------------------------------------------------------
ここからは骄掳トラックの棱汤をしますが、介めてこのドキュメントを粕む数は、
ここを粕み若ばして、黎に≈3.4.2 MMLコマンド误∽の数を粕んでください。
ここから布は、ある镍刨MMLコマンドが尸かってないと妄豺できないと蛔います。
--------------------------------------------------------------------------

骄掳トラックは、下不を今くためのトラックです。骄掳トラックでは、
その木涟に附れた肩トラックと极瓢弄に票袋が艰られます。
ちょっと尸かりにくいですので、恶挛毋を叫します。

毋えば、Aトラックでメロディ〖の不を棠らしているとします。
ところが、メロディ〖の庞面で、办婶尸だけ下不を棠らしたくなりました。

A ∧∧∧
A ∧∧∧
A ∧∧∧
A ∧∧∧ 〗 このあたりで下不が棠らしたくなった。

さあ络恃、糠たにトラックを侯らないといけません。毋えばBトラックを
侯る祸にします。そして、Bトラックの呵介の数には蒂射をたくさんいれて、
下不を棠らしたい婶尸にステップタイムを圭わせないといけません。
そうすると、毋えば、肌のようになります。

A ∧∧∧
B r1r1r1r1
A ∧∧∧
B r1r1r1r1
A ∧∧∧
B r1r1r1r1
A ∧∧∧  このあたりで下不が棠らしたくなった。
B ∧∧

こうやると、メロディ〖の庞面で下不を棠らせますが、冯菇缄粗がかかります。
糠たにBトラックを侯って、しかも呵介の数に蒂射をたくさん掐れないと
いけないわけですから。

このような眷圭に、骄掳トラックを蝗うと、润撅に弛に祸が笨びます。

A ∧∧∧
A ∧∧∧
A ∧∧∧
A ∧∧∧∧ このあたりで下不が棠らしたくなった。
1A ∧∧

このようにすればいいのです。骄掳トラック1A の黎片では、木涟の肩トラックAの
黎片と、极瓢弄にステップタイムが路えられます。
骄掳トラックは、攻きな箕にいつでも、肩トラックの木稿に掐れることが
できます。
では肌に、剩眶の舱疥で下不を棠らしたくなった眷圭の毋を疽拆します。

[侍の毋]

A ∧∧∧
A ∧∧∧
A ∧∧∧
A ∧∧∧∧  このあたりで下不が棠らしたくなった。
1A ∧
2A ∧
A ∧∧∧
A ∧∧∧
A ∧∧∧
A ∧∧∧∧  このあたりで下不が棠らしたくなった。
1A ∧
2A ∧
A ∧∧∧
A ∧∧∧
A ∧∧∧∧  このあたりで下不が棠らしたくなった。
1A ∧
2A ∧
A ∧∧∧

このように、下不が棠らしたくなった眷疥だけに骄掳トラックを掐れれば
紊いのです。肩トラック'A'の骄掳トラックは1A×9Aまでありますので、
1改の肩トラックに烧き、呵光で10脚下不まで棠らせるということになります。

ようするに、≈下不を棠らしたい眷圭は骄掳トラックを蝗え—∽です。
妒の呵介から呵稿まで下不を棠らしたいような眷圭は、骄掳トラックを
蝗う涩妥はありませんが。∈蝗ってもいいですが∷

なお、骄掳トラックでも肩トラックと票屯に、チャンネルの回年(Cnコマンド)や、
答塑不墓、オクタ〖ブ、ベロシティ〖の肋年は涩妥です。
ただし、ボリュ〖ム、エクスプレッション、ピッチベンドなど、1チャンネルに
烧き1改の猛しか积たないMIDIイベントは、骄掳トラックでは今かないように
して布さい。

[毋]

A  C1 o4 l8 k100 @0 v120 E127 BS64 ∧∧
1A C1 o4 l8 k100		   ∧∧
2A C1 o4 l8 k100		   ∧∧

惧の毋ですと、骄掳トラックでは、プログラムチェンジ(@n)、ボリュ〖ム(vn)、
エクスプレッション(En)、ピッチベンド(BSn)の淡揭は稍妥です。


3.4.2 MMLコマンド误

  MMLコマンドの棱汤をする涟に·まず·眶猛の回年について棱汤しますˉ
mml2midでは·いくつかのコマンドで眶猛を回年する眷圭がありますが·10渴眶
による回年の戮に·16渴眶による回年ができますˉ
  恶挛弄には·眶猛nの涟に≈x∽あるいは≈0x∽を烧けると·その木稿の2峰の
眶を16渴眶として胺います.

	[毋] x4F, x0a, x40

この眷圭、16渴眶はちょうど2峰で回年せねばなりません。毋えば≈xa∽とか
≈x103∽などは千められません。これは、峰眶を材恃にすると木稿の不射回年
との董肠が郏随になるためです。
  芒し、≈x∽や≈0x∽の稿を≈{ }∽でくくれば扦罢峰の16渴眶猛が今けます。
毋えば≈0x{103}∽のようにです。
  ≈x∽や≈0x∽で幌まっていない眶猛は、10渴眶として胺いますˉ


  では·笆惯で·改」のMMLコマンドについて棱汤していきますˉ
称コマンドは、络矢机、井矢机の惰侍がありますので、庙罢してください。
	      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  Cn	そのトラックの叫蜗するMIDIチャンネルを肋年します。认跋は1×16です。
	トラックの庞面でもチャンネルを恃构できますˉこのコマンドは称トラックの
	办戎呵介で涩ず回年して布さい。
	なお、このコマンドが回年されたときには、稿で棱汤する's'コマンドの
	跟蔡が极瓢弄に券跟します。

  Cn"矢机误"
	チャンネル回年の木稿に矢机误を淡揭することで、トラック叹の山淡が
	材墙です。SMFメタイベント FF 03 により叫蜗されます。
	(泣塑胳矢机を蝗う眷圭、涩妥に炳じてMML2MID悸乖箕のオプションスイッチ
	 -mを回年しないと疙瓢侯する眷圭があります。2鞠徊救)

	≈+∽を蝗って矢机误を息儡することもできます。
		(毋) C3"abc"+"def"		∧C3"abcdef"と票じ
	これはエクスクル〖シブの山淡面やWT, WI, WL, WM, WCコマンドの苞眶の
	矢机误にも鼎奶です(妥するに≈#∽で幌まる乖笆嘲の矢机误すべてに铜跟)。

  a×g	ˇ不射。c,d,e,f,g,a,bがそれぞれド,レ,ミ,ファ,ソ,ラ,シを山します。
	ˇ稿ろに'+'でシャ〖プ(染不惧がる)、'-'でフラット(染不布がる)を回年
	  できます。染不淡规は涩ず不墓回年の涟に弥いて布さい。'++'や'--'と
	  いう回年も材墙です(3つ笆惧は稍材)。
	  また、'*'でナチュラルの罢になります。拇规回年(稿揭)をしている眷圭
	  に、傅の光さに提すのに蝗います。
	ˇ稿ろに今かれた眶猛は不墓を山し、不墓を臼维した眷圭はlコマンドの
	  肋年猛が何脱されます。
	  [毋1] c2   ドの2尸不射
	  [毋2] d-4  レのフラットの4尸不射
	  [毋3] l8 e ミの8尸不射
	ˇ射爬'.'を1つまたは剩眶つけることができます。∈毋¨c4.d4..e.∷
	ˇ'^'で不墓を裁换することができます。'^'はいくつ蝗ってもかまいません。
	  ∈毋¨ c8^16.^64∷
	ˇ'-'で不墓を负换することができます。'-'はいくつ蝗ってもかまいません。
	  '-'はフラット∈染不布げる∷の淡规と票じであるため、山淡には庙罢が
	  涩妥です。∈[毋1] c-32   フラットと冉年される∷
		    ∈[毋2] c8-32  不墓の负换と冉年される∷
		    ∈[毋3] c-8-32 呵介の'-'はフラット、稿の'-'は不墓の负换∷
	  なお、负换および裁换は稿ろから芜换されるため、c8-32-48などとやると、
	  32から48を苞いた墓さ96∈= %2∷が负换されてしまいます。このような
	  眷圭にはc8-32^48としなくてはなりません。これだと、32に48を颅した
	  墓さが8尸不射から苞かれることになります。
	ˇ不墓はどんなに墓くなってもかまいません。∈SMFでは不墓回年を材恃墓
	  で山淡するため∷
	ˇコンマ','で惰磊って、ベロシティを回年する祸が材墙です。臼维箕は
	  kコマンドの猛が何脱されます。∈毋¨  c16,100	∷
	  c16,+10やc16,-10のようにkコマンドの猛からの陵滦回年も材墙です。
	ˇ不墓回年を0にした眷圭には、ノ〖トオフが乖われません。これを网脱して
	  下不遍琳が材墙です。∈毋¨  c0e0g4.  この眷圭、g4.の稿でc,e,gが
	  ノ〖トオフされます。∷
	  タイミングをずらした下不遍琳については&コマンドを徊救して布さい。
	ˇ不墓回年で涟に'%'を烧けると、クロック眶の回年になります。4尸不射を
	  48クロックとします(c4 = c%48)。
	    (毋: l4c0f0a-.^%12-48.,110	∧aフラットの不墓は烧爬4尸不射 プラス
	     12クロック マイナス 烧爬48尸不射)
	ˇ'%'を烧けた眷圭も、不墓を臼维するとlコマンドの肋年猛が何脱されます。
	  これによって、≈疥年の墓さより∵∵だけ墓い(or没い)不∽という淡揭も
	  材墙です。
	    (毋1: l2a%-8  ∧aの不墓は2尸不射 マイナス 8尸不射。これを≈l2a-8∽
	     と淡揭すると、aのフラットの8尸不射と豺坚されてしまいます)

	ˇVersion 5.00 から·糠怠墙が烧け裁わりましたˉ
	  不射に滦して·妈2苞眶·妈3苞眶の回年が材墙になりましたˉ
	  妈2苞眶は·ゲ〖トタイムの回年ですˉ
	  妈3苞眶は·キ〖オフベロシティの回年ですˉ
	  キ〖オフベロシティは·猛の陵滦回年が材墙ですˉ
	  [毋] a4.,100,10,40
	  ラの射爬4尸不射を, ベロシティ100, ゲ〖トタイム10,
	  キ〖オフベロシティ40 で券不しますˉ

	ˇVersion 5.26笆惯、脚恃淡规(ダブルフラット、≈--∽)の回年が材墙に
	  なった簇犯で、不射の稿ろに≈--∽を今いた眷圭の豺坚が骄丸と润高垂に
	  なりました。毋えば≈a--8∽と今くと、骄丸の惹では呵介の≈-∽はフラット
	  で2戎誊の≈-∽は不墓の(筛洁の墓さからの)负换と豺坚されましたが、
	  Version 5.26笆惯では≈--∽がダブルフラットと豺坚されます。
	  Version 5.26で骄丸と票じ豺坚をさせるには、年盗乖で≈#bc525∽回年を
	  するか、≈a-%-8∽のように淡揭して布さい。

  ln	不墓を肋年します。介袋猛は4です。不墓回年は不射の眷圭と票じです。
	(毋: l4.-%12 ∧不墓を烧爬4尸不射マイナス12クロックに回年)

  r	蒂射を回年します。不墓回年は不射の眷圭と票じです。
	附哼券不面の不は、蒂射の稿でノ〖トオフされます。
	∈毋¨ c&e&g&r4. とやると、r4.の稿でc,e,gがノ〖トオフされる。これは
	c&e&g^4.とやった眷圭と票じです。∷
	Ver5.00笆涟では·蒂射の稿でキ〖オフする眷圭には、qコマンドが漂かない
	という风爬がありましたが·Ver5.0笆惯では饯赖されていますˉ
	(qおよび&コマンドを徊救して布さいˉ)

 qn1,n2 ノ〖トオフのタイミングをn1ステップだけ玲くしますˉn1の介袋猛は1ですˉ
	n2は呵你券不墓ですˉn1よりも庭黎されますˉ
	つまり·qコマンドによってノ〖トオフのタイミングをn1ステップだけ
	没くしますが·没くするとは咐っても呵你n2の墓さは券不する·という
	ことですˉn2の介袋猛は0ですˉ
	このコマンドは·虑ち哈みには风かせないコマンドです。

	このコマンドは·Version5.0 から慌屯が警し恃わっていますˉ
	n1にマイナスの猛を回年∈q-n1∷すると·Ver5.0 笆涟のバ〖ジョンでは·
	ノ〖トオン稿n1クロックしてノ〖トオフする·という罢蹋でしたが·
	Ver5.0 笆惯では·q0よりも·さらにノ〖トオフを觅らせるという罢蹋に
	なっていますˉ
	[毋] q-4 a2c2
	aの不がノ〖トオンされて·肌に·cの不がノ〖トオンされてから
	4ステップ稿にaの不がノ〖トオフされますˉ
	つまり·n1のマイナス回年は·レガ〖ト琳恕のシミュレ〖トに蝗えますˉ
	[毋] q-10 <a4>c4e4a4 などとやると·スラ〖の跟蔡を券带しますˉ

	Ver5.0笆涟のバ〖ジョンのようなnのマイナス回年をしたい眷圭は·
	妈1, 妈2パラメ〖タをうまく寥み圭わせて蝗って布さいˉ

	[毋] 奠バ〖ジョンのq-2 ⅹ Ver5.0笆惯 q500,2

	妈1パラメ〖タn1に络きな猛を回年しておいて·妈2パラメ〖タn2に井さな猛を
	回年することにより·キ〖オンしてからn2ステップ稿にキ〖オフされるように
	なりますˉ

	哭で棱汤すると·笆布のようになりますˉ

	不射のキ〖オン疤弥
	 |
	 |<===========不射の墓さ===============>|
	 +------------+------------+------------+--->
	 |<=== n2 ===>| 	   |<====n1====>|
	   呵你券不墓		   |
			   不射のキ〖オフ疤弥

  Qn	ノ〖トオフのタイミングを充圭で回年します∈券不箕粗をn/8にします∷。
	介袋猛は8です。
	∈このコマンドは、PMDやN88BasicのMMLと票屯の跟蔡があります。∷
	[毋1]	 c4
	[毋2] Q2 c4
	毋1は4尸不射の墓さのcの不が券不されますが、毋2では'Q2'が
	回年されているので、4尸不射の2/8の墓さ∈16尸不射∷だけcの不が
	券不されます。つまり、4尸不射♂48ステップの2/8で12ステップ誊で
	ノ〖トオフされることになります。

	このコマンドは、qコマンドと驶脱が材墙です。
	[毋1]	    c2 ∧ 2尸不射♂96ステップ
	[毋2] Q2    c2 ∧ 96の2/8で24ステップ誊でノ〖トオフされます。
	[毋3] Q2 q3 c2 ∧ 24-3の21ステップ誊でノ〖トオフされます。

  &	涟の不をキ〖オフしない。このコマンドは不射または蒂射の木稿でないと
	罢蹋を积ちません。
	このコマンドはあくまでも涟の不をキ〖オフしないだけで、骄丸のドライバに
	あった不射粗のタイ∈毋えばc&c2のような∷を回年する怠墙はありません。
	タイコマンドとして怠墙させるには、肌のようにして布さい。
	∈毋¨c&r2  この眷圭はc^2とほぼ票じ罢蹋ですˉ∷
	また、肌のようにするとタイミングをずらした下不遍琳が材墙です。
	∈毋１¨ c&e&g	     毋２¨ c64&e64&g8-32 ∷
	キ〖オン稿、券不したまま∈キ〖オフせずに∷ボリュ〖ムを恃えたりする
	ような眷圭にも蝗えます。∈毋¨ v100 c4& v80 r2 ∷

	Ver5.0笆涟のバ〖ジョンと、警しだけ慌屯が恃わっています。
	奠バ〖ジョンでは、c&r2 のように&で不射や蒂射を芬げた眷圭に、qコマンド
	の猛の跟蔡が痰浑されましたが、Ver5.0笆惯では饯赖されています。

  kn	ベロシティを肋年します。介袋猛は100です。k-nおよびk+nで陵滦回年が
	できます。陵滦回年の箕のnも臼维できますˉ'k-'は·'k-1'と票じですˉ
	'k+'は'k+1'と票じですˉ

  kn1 (,n2) (,n3)
	kコマンドに妈2、妈3パラメ〖タを回年することもできます。この眷圭、
	キ〖オンごとのベロシティの恃步が回年できます。
	   n1 ∧ ベロシティ(陵滦回年材)
	   n2 ∧ キ〖オンごとのベロシティ恃步翁(-127×127)
	   n3 ∧ ベロシティが0か127を臂えたときの借妄を回年するスイッチ
		 n3 = 1 のときベロシティの恃步が瓤纪弄になる。
		 n3の介袋猛は0です。
       [毋1] k64,10
	 キ〖オンごとにk64からベロシティが10ずつ笼裁。127を臂えそうになると
	 匿贿するˉ
       [毋2] k80,-15,1
	 キ〖オンごとにk80からベロシティが15ずつ负警するˉ
	 0を臂えそうになると海刨は15ずつ笼裁。(つまり·'瓤纪弄'になります)
	 この跟蔡を豺近するには、k64などとして糠たにkコマンドを流ればよい。
	 豺近の箕にベロシティの猛を恃えたくない眷圭は·k+0のように0を
	 陵滦回年すればよいˉ

  krn1 (,n2)
	ベロシティをランダムに恃步させますˉkr0で豺近しますˉ
	   n1 ∧ 呵络恃步翁∈附哼のベロシティ猛から -n1 × +n1 の认跋で
	         恃步させます∷
	   n2 ∧ 恃步のタイプ∈臼维箕は1となります∷
	         n2=1では·附哼のベロシティ猛(k)に夺い猛の栏弹澄唯が光く·
	         kから违れる猛ほど栏弹澄唯が你くなりますˉ悸狠の遍琳に夺い
	         极脸な跟蔡が评られますˉ
	         n2=2では·kから违れるにつれて木俐弄に栏弹澄唯が布がりますˉ
	         n2>=3では·kから违れた猛の栏弹澄唯が光くなりますˉn2を络きく
	         するほどこの饭羹が动まりますˉ

	          タイプ = 1           タイプ = 2           タイプ >= 3
	             *                     *                 
	            *|*                   *|*          
	            *|*                  * | *                ***** 
	           * | *                *  |  *             **  |  **
	           * | *               *   |   *           *    |    *
	          *  |  *             *    |    *         *     |     *
	        **   |   **          *     |     *        *     |     *
             ***     |     ***      *      |      *      *      |      *
           --+-------+-------+-- --+-------+-------+-- --+------+------+--
	     k-n1    k     k+n1   k-n1     k     k+n1   k-n1    k    k+n1
                            ランダムベロシティ栏弹澄唯のグラフ

       [毋1] kr10  ; スネアドラム霹に努していますˉ
       [毋2] kr5
       [毋3] kr10,2
       [毋4] kr0   ; ランダムベロシティの豺近

  on	オクタ〖ブを肋年します。介袋猛は4です。
	o4のcがSMFのノ〖トナンバ〖60∈3CH∷に滦炳します。
	o-nおよびo+nで陵滦回年ができますˉ

  <	オクタ〖ブを１つ布げます。o-1と票じですˉ

  >	オクタ〖ブを１つ惧げます。o+1と票じですˉ

  (n	ベロシティをn布げます。(nを臼维した箕はVnで回年した猛となります)
	kコマンドの陵滦回年≈k-n∽と击ていますが、笆布のような般いがあります。
	ˇ≈(n∽コマンドでは妈2ˇ3苞眶は回年できません。木涟のkコマンドで
	  妈2ˇ3苞眶が回年されていればそれが苞き鲁き铜跟になります。
	ˇ≈k-n∽ではnを维すると1を簿年します。

  )n	ベロシティをn惧げます。(nを臼维した箕はVnで回年した猛となります)
	kコマンドの陵滦回年≈k+n∽との簇犯は、≈(n∽と≈k-n∽の簇犯と票じです。

  Vn	ベロシティコマンドのnを臼维したときのディフォルト猛の肋年を肋年します。
	介袋猛は4です。

  vn	不翁を肋年します。认跋は0×127です。介袋猛は稍年です。
	v-nおよびv+nで陵滦回年が材墙です。

  pn	パンポットを肋年します。认跋は0×127で面丙は64です。
	眶猛nを臼维した眷圭にはn=2と票じ胺いになります。
	介袋猛は稍年です。p-nおよびp+nで陵滦回年が材墙です。
	kコマンドと票屯に、妈2、妈3パラメ〖タの回年ができます。
	∈ kn1 (,n2) (,n3) コマンドを徊救してください ∷

  [×]n	'[]'で跋まれた粗を回年搀眶だけ帆り手しますˉ搀眶の回年を维すると
	2搀になります。あるチャンネルでの帆り手しが、剩眶乖にまたがって
	いてもかまいません。なお、マクロ柒で蝗う眷圭、帆り手しはマクロ柒で
	誓じていなければなりません。また、≈" "∽で跋まれた矢机误柒では、
	≈[∽や≈]∽が附れても帆り手しは乖われません。

  :	'[]'の面を遍琳面、呵稿の帆り手しでその超霖のル〖プを却けます。
	∈毋¨ [ce:ge]4cg ∷

  @n	プログラムチェンジを乖います。认跋は0×127です。介袋猛は稍年です。

  @+n	プログラムチェンジの猛をすべてnだけ笼やします。GM不富脱。

  wn	キ〖オフベロシティを回年します。介袋猛は0です。
	不富によってはキ〖オフベロシティの跟蔡は痰浑されます。
	奶撅は肋年する涩妥はないと蛔います。

 yn1,n2	コントロ〖ルチェンジを乖います。认跋はn1,n2ともに0×127です。

 Hn1,n2 バンクチェンジを乖います。n1がMSB∈コントロ〖ルチェンジ0戎∷、
	n2がLSB∈コントロ〖ルチェンジ32戎∷です。
	∈毋１¨H0,1 @12    毋２¨H8,1 @0∷

  BRn	ベンドレンジを肋年します。认跋は不富の怠硷によって般います。
	∈ただし砷の猛は减け烧けません。∷
	このデ〖タはMIDI RPNパラメ〖タ0戎で流慨されます。
	GM滦炳不富では介袋猛は2になっていると蛔います。

  BSn	ベンドをセットします。认跋は0×127です。介袋猛は稍年です。
	呵介にBS64をやっておくと紊いでしょう。
	BS-nおよびBS+nでの陵滦回年が材墙です。

  ~n	BSnと票じです。

  BWn	ベンドを２バイトでセットします。认跋は0×16383です。
	BS127はBW16256に、BS64はBW8192に滦炳します。
	BW-nおよびBW+nでの陵滦回年が材墙です。

BTn1,n2 BEAT∈秋灰∷肋年します。尸灰がn1で尸熟がn2です。
	∈毋¨BT6,8 = 6/8秋灰∷
	SMFのFORMAT1では妈1トラック∈テンポマップ∷に叫蜗します。

  tn	テンポを肋年します。认跋は1×65535。介袋猛は稍年です。
	剩眶パ〖トにちらばっていても材。
	SMFのFORMAT1では妈1トラック∈テンポマップ∷に叫蜗します。
	t-nやt+nでの陵滦回年もできます。
	≈t(n∽と回年すると(nは臼维材)、その箕爬でのテンポをスタックに锣闰
	した惧で糠たなテンポを肋年します。また、≈t)∽で涟搀锣闰された
	テンポを牲耽します。
	  [毋] t150 cde t(-30 fga t) gfed
	    靠ん面のfgaはテンポ120、それ笆嘲はテンポ150で遍琳します。

 Mn1,n2 ディレイタイム(n1)烧きモジュレ〖ションを肋年します。ノ〖トオン稿、
	n1クロック稿にn2の猛でモジュレ〖ションを齿けます。ノ〖トオフと票箕に
	モジュレ〖ションもオフとなります。介袋猛はM0,0です。M0,0またはMOF
	コマンドが丸るまで、ノ〖トオンするごとにこのコマンドが漂きます。

	Ver5.0からは·モジュレ〖ションを0に提すタイミングが恃わりましたˉ
	奠バ〖ジョンでは·キ〖オフ木稿にモジュレ〖ションを0に提しましたが·
	Ver5.0からは·肌のキ〖オンの木涟にモジュレ〖ションが0に提りますˉ

       不射のキ〖オン		      不射のキ〖オフ	肌のキ〖オン
	|				      | 	 |
       ++------------+------------------------+---------++---------->
       | <=== n1 ===>|					|
       |	     |					|
       |       モジュレ〖ションをn2に肋年	 モジュレ〖ションを0に提す
       |
      モジュレ〖ションを0に肋年

  MONn	痰掘凤にモジュレ〖ションを齿けます。
	认跋は0×127です。
	このコマンドが回年された箕には·Mn1,n2コマンドの跟蔡が豺近されますˉ

  MOF	MONnおよびMn1,n2コマンドを豺近しますˉMON0 と票じですˉ

  En	エクスプレッションを流ります。コントロ〖ルチェンジの11戎で流慨
	します。E+nおよびE-nでの陵滦回年が材墙です。

  RT	そのトラックをリズムパ〖トに回年します。
	これがあるパ〖トは、コンパイル箕にスイッチtを烧けてもトランスポ〖ズ
	しなくなります。
	このパ〖トではノ〖トオン稿、1クロック稿にノ〖トオフします。
	∈このトラックではqコマンドを蝗う涩妥がありません。∷

  EXn1,n2,n3,n4∧
	エクスクル〖シブを流慨します。16渴眶で回年した眷圭には眶猛の涟に
	'x'を烧けて淡揭してください。
	1バイト誊に怠硷のIDナンバ〖が丸て、呵稿に姜眉コ〖ド247(xF7)が丸ます。
	肩なメ〖カ〖のIDナンバ〖は笆布の奶りです。
	  x40∧KAWAI	  x42∧KORG	  x44∧CASIO
	  x41∧ROLAND	  x43∧YAMAHA	  x47∧AKAI

	Rolandの不富は·CheckSumを流る涩妥がありますが·CheckSum极瓢纷换
	することもできますˉ毋えば·
	[毋] EXn1,n2,{n3,n4,n5,n6},n7
	のように回年すると·n3,n4,n5,n6に滦してCheckSumを纷换し·n6とn7の
	粗の疤弥にCheckSumが极瓢弄に叫蜗されますˉ

	エクスクル〖シブの山淡面に"矢机误"を掐れることも材墙ですˉ
	[毋] EXx41,x10,x45,x12,{x10,x00,x00,"abc"},x7f

	バルクダンプ流慨のため、ビットの腊妨怠墙が蝗脱できます。
	バルクダンプは、不富柒のデ〖タを木儡流りますが、塑丸８ビット墓の
	ダンプを乖なうのにMIDI慨规では７ビットしか流れないため、流慨デ〖タ
	を腊妨する涩妥があり、この腊妨を极瓢で乖なうことが叫丸ます。
	腊妨の数恕は、怠硷やメ〖カ〖によって般いますが、附哼は笆布の２奶り
	の数及が脱罢されています。
	{N∧}	ＧＳ不富などで蝗われる、Niblize数及に腊妨します。
	{T∧}	KORGのTR-Rackで蝗われる数及に腊妨します。
	いずれも、カッコ柒のデ〖タ误が腊妨されます。このカッコ柒では、デ〖タ
	は8ビット墓(x00×xff)の回年が材墙で、砷の猛も蝗うことが叫丸ます。
	∈砷を回年する眷圭は-128まで∷
	[毋1] EX∧∧,{Nx80,xff,xc7},xf7
	      これは、EX∧∧,x08,x00,x0f,x0f,x0c,x07,xf7 と票じになります。
	      niblize数及とは、帽姐に惧疤４ビットと布疤４ビットを尸けて流慨
	      する数及です。拒しくはＧＳ不富などのマニュアルを徊救して布さい。
	[毋2] EX∧∧,{Tx80,xff,xc7,x40,x55,x67,xd9},xf7
	      これは Ex∧∧,x47,x00,x7f,x47,x40,x55,x67,x39,xf7 と票じになり
	      ます。TR-Rackは、8Bitのデ〖タ7改を7Bitのデ〖タ8改に腊妨します。
	      腊妨涟(Dump Data):n0[b7-b0],n1[b7-b0],∧∧,n6[b7-b0]
	      腊妨稿(Midi Data):[n6b7∧n0b7],n0[b6-b0],n1[b6-b0],∧,n6[b6-b0]
	      拒しくは、不富のマニュアルを徊救して布さい。なお、澄千はしていま
	      せんが、戮のKORG不富∈03R/Wなど∷も票じ数及の材墙拉は动いと蛔い
	      ます。
	バルク腊妨とチェックサムを票箕に蝗脱することが叫丸ます。ただし、
	チェックサムのカッコはバルク腊妨のカッコより嘲娄でのみ蝗脱材墙となり
	ます。

	バルク腊妨のカッコ柒では、面庞染眉なビット升∈８ビット踏塔∷を积つ
	眶猛が回年叫丸ます。眶机の涟にBn_をつけて布さい。nはビット升を山す
	眶机で、１×８が蝗脱叫丸ます∈８の眷圭は部も回年しないのと票じにな
	ります∷。毋えば、この回年により５ビットの眶猛を回年した眷圭、肌の
	眶猛は、その１バイトの荒り３ビットから呈羌されます。３ビットで掐り
	きらない眷圭は、バイト董肠をまたいで呈羌されることになります。
	[毋1] Ex∧,{NB4_x0f,B4_x08}
	      EX∧,{Nxf8} と票じになります。
	[毋2] Ex∧,{NB3_x07,B6_x08,B7_x7f}
	      Ex∧,{Nxe4,x7f} と票じになります。ちょっとややこしいので棱汤
	      しますと、この２つの眶猛を２渴で今くと、11100100,01111111 に
	      なります。呵介の３ビットは111なので７です。肌の６ビットは、
	      001000なので８です∈これはバイト董肠をまたいで呈羌されています∷
	      呵稿７ビットは1111111なのでx7fです。
	[毋3] Ex∧,{NB3_-1,B6_8,B7_127}
	      眶猛としては毋２と链く票じですが、10渴山淡やマイナスの回年も
	      叫丸ます。
	ビットの呈羌觉轮が染眉な觉轮でバルク腊妨のカッコを誓じた眷圭、踏呈羌の
	ビットは０で虽められます。

  EEn1,n2,n3,n4∧
	デ〖タをSMFに木儡叫蜗しますˉ

  !	コンパイル箕に、そのトラックのこのコマンド笆惯のデ〖タを痰浑します。

  /*	このコマンド笆惯、≈*/∽までをコメントとみなします。掐れ灰には
	できません。コメントを誓じる≈*/∽がないとエラ〖になります。

  ;	このコマンド笆惯、乖琐までをコメントとみなします。

 $a×$z	マクロ年盗乖を钙び叫しますˉ

 _n	これがあるトラックのこのコマンド笆惯をnだけ败拇します。
	认跋は-99×99です。介袋猛は0です。

__n	败拇の陵滦コマンドですˉ∈_nで回年した猛をnだけ恃步∷

  Jn	不超を戎规で回年し、なおかつ、このコマンド笆惯の不超を痰浑します。
	∈动扩弄に不超がnになります∷
	介袋猛は0です。また、J0とやると、このコマンドの跟蔡が痰跟になります。
	このコマンドは、ドラムパ〖トに蝗うと跟蔡弄です。
	[毋] $k J36 k100 ; bass drum
	     $s J38 k105 ; snare drum
	     A C10 v100 [$kc4$sc8$kc4c8$sc4]4 ; ドラムパタ〖ン

  K	このコマンドの木稿に山淡する不射の不超でキ〖オンします。
	舍奶の不射の回年と票屯、'+'(シャ〖プ)、'-'(フラット)、'*'(ナチュラル)
	などが蝗えますし、拇规回年も铜跟です。
	コンマ','で惰磊って、ベロシティを回年する祸が材墙です。臼维箕は
	kコマンドの猛が何脱されます。不墓回年は'rn&'コマンドにより乖います。
	このコマンドを蝗って不を棠らした眷圭には极瓢弄にキ〖オフしませんので、
	稿でKc,0などとやってベロシティ〖0の不射を掐れてキ〖オフ∈赴茸弛达の
	眷圭は赴茸から回を庶すことを绩す∷してやる涩妥があります。

	毋１¨ドの不をベロシティ〖100で棠らしながら、8尸不射沸册稿にe16r16g8
	      と棠らし、さらに8尸不射沸册稿にドの不をキ〖オフする眷圭。
		Kc,100 r8& e16r16g8 r8 Kc,0
	毋２¨ドの不を棠らし、8尸不射沸册稿にミの不を棠らし、さらに8尸不射
	      沸册稿にソの不を棠らすと票箕にドの不をキ〖オフし、さらに8尸不射
	      沸册稿にミの不をキ〖オフし、さらに8尸不射沸册稿にソの不をキ〖
	      オフする眷圭。∈ギタ〖パ〖トなどで跟蔡があります。∷
		Kc r8& Ke r8& KgKc,0 r8& Ke,0 r8& Kg,0
	      悸狠には烫泡なので c8&e8&g4 とやって貉ますことが驴いですがˉ
	      ∈これだと呵稿にド、ミ、ソが票箕にキ〖オフされます。∷

	このコマンドは1トラックであらゆる不射の寥み圭わせを山淡できるように
	するため纳裁しました。MMLとしてはかなり痰妄のある山淡になるため、剩花
	な不射の寥み圭わせを浩附する眷圭にはなるべく剩眶のトラック∈または
	骄掳トラック∷を脱いて山淡して布さい。

	毋¨ A C1 Kc,100r8&e16r16g8r8Kc,0 ;これを骄掳トラックを脱いて山淡すると

	     A	C1 c2			  ;こうなる
	     1A C1 r8e16r16g8r8		  ;  わけです。

  A	ポリフォニックˇキ〖ˇプレッシャ〖を回年しますˉ
	このコマンドの木稿に山淡する不射の不超で贷に券不面の不に滦し、
	ポリフォニックˇキ〖ˇプレッシャ〖の跟蔡を涂えます。
	悸狠にどのような跟蔡が评られるかは·MIDI不富の硷梧やMIDI不富の肋年に
	巴赂しますˉこのコマンドの回年の慌数はKコマンドと链く票じで、
	≈,∽で惰磊ってベロシティ∈キ〖ˇプレッシャ〖の动さ∷を回年できますˉ
	ベロシティの臼维箕はkコマンドの猛が何脱されます。

	毋: ドの不を棠らし·4尸不射沸册稿にベロシティ50でポリフォニック
	    キ〖プレッシャ〖涂え·さらに8尸不射沸册稿にキ〖オフにしますˉ
		c4& Ac,50 r8

  s	Control Change·および·Pitch Bendの臼维怠墙を·称Control Change·
	および·Pitch Bendに滦して·肌の1搀だけ豺近しますˉ
	mml2midでは·答塑弄に·痰绿なControl ChangeやBendは·办磊叫蜗しませんˉ
	つまり·毋えば·MML面で'E100'が回年されても·すでに附哼のExpressionが
	100である眷圭には·ExpressionはSMF面には叫蜗されませんˉ
	しかし·Exclusiveなどを蝗って·トラックの庞面でMIDI不富の充り碰て
	パ〖トを恃构するような眷圭には·コマンドが臼维されるという怠墙が
	啼玛となる眷圭がありますˉこのような眷圭に's'を回年すれば·肌の1搀に
	嘎り·臼维怠墙を豺近することができますˉ
	なお·sコマンドは·Volume, Expression, Panpot, Modulation, Pitch Bend
	のそれぞれに滦して·称1搀跟蔡を券带しますˉ
	したがって·毋えば·≈s v120 s E100 s p64∽などのように·v,E,pの
	それぞれに滦して回年する涩妥はなく·≈s v120 E100 p64∽とやれば
	OKですˉ
	なお、'Cn'コマンドによってトラックの庞面でMIDIチャンネル戎规が
	恃构された眷圭には、极瓢弄に's'コマンドが券跟します。

  &n	≈n尸不射∽による眶猛の回年ですˉ塑丸はステップ眶で回年するべき猛を
	n尸不射の帽疤で回年したい眷圭に·眶猛の木涟に&を烧けますˉ
	[毋]M&4.,120
	Mコマンドのディレイタイムを射爬4尸不射の墓さに肋年しますˉ

	'&n'は、不を芬げるコマンド'&'と票じ矢机を蝗っていますので寒票しやすい
	ですが、こちらの'&n'は、眶猛の木涟に弥いてください。

  Dn	附哼のチャンネルに滦してディチュ〖ンをかけますˉnは·-64×63 の认跋で
	回年して布さいˉSMFには·RPNイベントを蝗って淡揭されますˉ
	BSコマンドのピッチベンドと击た跟蔡が评られますが·ベンドとは迫惟に
	かかります。

  TCn	フィルタのカットオフ件侨眶を回年します。(0″n″127)
	nが络きくなるほど汤るい不になり、nが井さくなるほど芭くこもった
	炊じの不になります。∈不富や不咖によっては跟蔡が附れません∷

  TRn	レゾナンスを回年します。(0″n″127)
	nが络きくなるほどファンキ〖な不になります。
	∈不富や不咖によっては跟蔡が附れません∷

  FE, FB, FW, FV, FP, FC, FR, FM, FA, FT (エンベロ〖プコマンド)
	FEはエクスプレッション、FBはベンド、FWは2バイトのベンド、
	FVはボリュ〖ム、FPはパンポット、FCはカットオフ件侨眶、FRはレゾナンス、
	FMはモジュレ〖ション、FAはアフタ〖タッチ(チャンネルˇプレッシャ〖)、
	FTはテンポに滦して跟蔡がかかります。
	ノ〖トオン∈券不∷のたびに髓搀エンベロ〖プの跟蔡が倡幌します。

	[パラメ〖タの棱汤]
	     FEn1,n2,n3,n4(,n5,n6)(,n7,n8)(,n9,n10)(,n11,n12)∧∧
	     n1:猛を今き哈む裳刨 (ステップ眶)
	     n2:介袋恃疤
	     n3:1搀誊の恃疤箕粗 (n尸不射回年)
	     n4:1搀誊の恃疤
	     n5:2搀誊の恃疤箕粗 (n尸不射回年)
	     n6:2搀誊の恃疤
	     n7:3搀誊の恃疤箕粗 (n尸不射回年)
	     n8:3搀誊の恃疤
	     n9:∧笆布票屯
		恃疤(n2,n4,n6,∧)は、FWに滦しては-16383×16383、
		それ笆嘲(FTを近く)に滦しては-127×127で回年して布さい。

	[毋] E127 FE3,0,8,-50,2.,50 c2e2g1
	     ∈c2,e2,g1のそれぞれにエンベロ〖プの跟蔡がかかります∷


	FE0,FB0 などのように、妈1パラメ〖タに0を回年すると豺近されます。
	この眷圭を近き、パラメ〖タは4改笆惧の饿眶改でなければなりません。

       ____________________________
	  ^    **		^
	  |	 **		|
	n2|	   **		|	       ____________
	  |	     ** 	n4	      ***      ^
	  v	       **	|	   *** ^ *     |
	  -    +---------**-----|-------***----|--*----|------------
	       |	   **	|    ***       n6  *   n8
	       |	     ** v ***	       v    *  |
	       |	       ***---------------    * |
	       |				      *v
	       |				       **********
	       |<======n3======>|<=====n5=====>|<==n7=>|
		   n3,n5,n7∧はn尸不射の帽疤で回年する。

		   n1は、部ステップごとに今くか。

	n1の猛を井さくすると篮刨は紊くなりますが、その瓤烫、不富に
	络きな砷操をかけることになります。timebaseの猛が络きい眷圭には
	庙罢が涩妥です。

	(徊雇)FBをポルタメント怠墙の洛脱として蝗えます。
	  毋: BS64 BR24 c4& FB2,0,4,32 r2
		BRを蝗って惧げ布げ升を拇腊します。

  UE, UB, UW, UV, UP, UC, UR, UM, UA, UT (妈２エンベロ〖プコマンド)
	不射や蒂射と痰簇犯に侯脱するエンベロ〖プコマンドです。
	回年するパラメ〖タはFE, FB, FW, FV, FP, FC, FR, FM, FA, FTコマンドと
	票じです。

	UE,UB,UW,UV,UP,UC,UR.UM,UA,UTコマンドが今かれた箕爬でエンベロ〖プの
	跟蔡が券跟し、エンベロ〖プが姜位した箕爬で极瓢弄にコマンドが豺近
	されます。(UE0,UB0 のように、妈1パラメ〖タに0を回年することは
	できません。) パラメ〖タは4改笆惧の饿眶改でなければなりません。

	[毋] E127 UE3,0,2,-100,2,100 l8 cdefgab>cdefg<
	     ∈不翁が肌妈に井さくなってから络きくなります。∷

  IE, IB, IW, IV, IP, IC, IR, IM, IA, IT (LFO(慷升恃拇)コマンド)
	IEはエクスプレッション、IBはベンド、IWは2バイトのベンド、
	IVはボリュ〖ム、IPはパンポット、ICはカットオフ件侨眶、IRはレゾナンス、
	IMはモジュレ〖ション、IAはアフタ〖タッチ(チャンネルˇプレッシャ〖)、
	ITはテンポに滦して跟蔡がかかります。
	ノ〖トオン∈券不∷のたびに髓搀跟蔡が倡幌します。

	[パラメ〖タの棱汤] IEn1,n2,n3,n4,n5
			   n1:慷升(1×63)
			   n2:猛を今き哈む裳刨(ステップ眶)
			   n3:ディレイ墓(ステップ眶)
			   n4:侨墓(ステップ眶)
			   n5:呵络慷升になるまでの墓さ(ステップ眶)

	[毋] B64 IB10,2,32,12,24 c2e2g1
	     ∈c2,e2,g1のそれぞれに跟蔡がかかります∷

	IE0, IB0 のように妈1パラメ〖タに0を回年すると豺近されます。
	それ笆嘲の眷圭は、パラメ〖タは4改か5改でなければなりません。
	パラメ〖タが4改の眷圭は、妈5苞眶に0を回年したものと斧なされます。

			  -------------------------------------
			】     *       *       *       *      ^
      不射のキ〖オン  】      * *     * *     * *     * *     |慷升
	 |	    】	      * *     * *     * *     * *     |n1
	 |	  】   ***   *	 *   *	 *   *	 *   *	 *    v
	 +-------+***-*--*---*---*---*---*---*---*---*---*---------->
	 |	 |± **  *   *	 *   *	 *   *	 *   *	 *
	 |<=n3==>|  ±	  * *	  * *	  * *|	  * *|	  *
	 ディレイ|    ±  * *	  * *	  * *|	  * *|	  *
       ステップ眶|	± *	   *	   * |	   * |	   *
		 |	  ---------------    |	     |
		 |<==n5==>|		     |<==n4=>|
	       呵络慷升になるまでの	       侨墓	n2:部ステップごとに
	       ステップ眶				   今き哈むかˉ

	n2の猛を井さくすると篮刨は紊くなりますが、その瓤烫、不富に
	络きな砷操をかけることになります。timebaseの猛が络きい眷圭には
	庙罢が涩妥です。

  |	井泪俐ˉMMLが斧白くなるという跟蔡がありますˉコンパイルにおいては
	鄂球やTABと票霹に胺われますˉ不射の不墓回年の庞面にも掐れられますˉ
	∈毋¨ f4.^4g4a-8 | ^2f2 | e-4.^4f4g8 | ^1 ∷

 Nn1,n2,n3
	NRPNパラメ〖タを流るコマンドです。∈不富によって回年する猛は
	佰なります。拒しくは称不富のマニュアルをご枉布さい。∷
	n1 ∧ MSBパラメ〖タ Control Change 99戎で流慨されます。
	n2 ∧ LSBパラメ〖タ Control Change 98戎で流慨されます。
	n3 ∧ デ〖タ	    Control Change 6戎で流慨されます。
	なお、デ〖タの布疤バイトは痰浑します。

	[毋]呵夺のGM不富∈MU80, SC88, NS5Rなど∷の眷圭
	N1,x20,n  ∧  Filter	  n = x40 が面看∈TCnと票じです∷
	N1,x21,n  ∧  レゾナンス  n = x40 が面看∈TRnと票じです∷
	N1,x63,n  ∧  EG Attack   n = x40 が面看∈络きい镍觅い∷
	N1,x64,n  ∧  EG Decay	  n = x40 が面看∈络きい镍觅い∷
	N1,x66,n  ∧  EG Release  n = x40 が面看∈络きい镍觅い∷

	アタックを办戎庐くしたい眷圭には、N1,x63,0 のように回年します。

  P	ダンパ〖ˇペダル∈コントロ〖ルチェンジ64戎∷をオンにします。

  X	ダンパ〖ˇペダルをオフにします。

  S	このコマンドが淡揭されている箕爬のステップ眶などの攫鼠を
	∈コンパイル箕に∷山绩します。
	MMLを虑ち哈んでいるうちにあるパ〖トで不がずれた、などの眷圭に
	ステップ眶を澄かめるのに舔に惟ちます。

	ステップ眶笆嘲にも、肌の攫鼠が山绩されます。
	  バンク戎规、プログラム戎规、オクタ〖ブ、ボリュ〖ム、ベロシティ、
	  エクスプレッション、パンポット、ベンド、ゲ〖トタイム、
	  妈２ゲ〖トタイム、答塑不墓。
	妒の链挛に畔ってル〖プさせる箕に、ル〖プ倡幌箕と姜位箕の
	オクタ〖ブなどの办米を澄かめるのに舔惟ちます。

  Gn	チャンネルˇプレッシャ〖をセットします。(0″n″127)

 KJ, KI 拇规コマンドです。キ〖オンのコマンドKと1矢机誊が票じですが、
	こちらは2矢机誊が络矢机のJかIであることにより惰侍できます。
	KJはKey maJorの维で、毋えば≈KJg∽のように回年するとそのトラックは
	ト墓拇の拇规、つまり泼に回年しなければ不射fは染不惧げて遍琳すると
	いう罢蹋になります。KIはKey mInorの维で、毋えば≈KIe∽は≈KJg∽と
	票じ罢蹋です(ト墓拇とホ没拇の拇规は票じ)。
	回年する拇灰の稿には≈+∽か≈-∽を2つまで芬げられます。毋えば
	≈KJe-∽は恃ホ墓拇の罢蹋です。芒し#german回年がある眷圭、KJbや
	KIbの稿ろにだけは≈+∽も≈-∽も芬げられません。
	拇规回年は、ハ墓拇の回年KJc(あるいはイ没拇の回年KIa)で豺近できます。
	拇规回年をしても、汤绩弄に≈+∽や≈-∽を烧けた不射は、傅」の光さ
	から染不惧布になります。毋えばKJgでト墓拇にしていても、≈f-∽は
	fの染不布(eと票じ不)であり、fのシャ〖プの染不布でfに提るのでは
	ありません。
	また、#german回年がある眷圭、拇规は不射hには跟きますが、bには跟き
	ません。不射bは撅にh-と票じ不です。

  C	'Cn'コマンドはチャンネル戎规の回年ですが、矢机'C'は年眶としても
	蝗えます。
	いろいろなコマンドの眶猛面で'C'が叫てきたら、それはMIDIチャンネル
	戎规を山す年眶として胺われます。

	毋¨Emu Proteux FXにおいて、附哼のチャンネルをオフにしたい眷圭。
	EXx18,x04,x00,x03,C - 1,x03,x00,x00,xf7 r%1 ; Channnel C off

  R	'R'も'C'と票屯、年眶を山します。'R'はロ〖ランド及のチャンネル戎规を
	山します。
	  チャンネル10ならばRは0
	  チャンネル1×9ならばRは1×9
	  チャンネル11×16ならばRは10×15
	となります。

	毋¨Roland GS不富において、附哼のチャンネルをオフにしたい眷圭。
	EXx41,x10,x42,x12,{x40,R + x10,x02,x10},xf7  ; GS-Ch. off

  Z{∧} 恃眶遍换コマンド。恃眶に猛を洛掐したり、颅し换、苞き换をします。
	恃眶はz0×z255です。
	  毋: Z{z3 = x10 + C, z4 = z4 + z1, z5 = x20}

	洛掐ができます。
	  毋: Z{z0 = 10}  z0に10を洛掐します。

	洛掐矢をコンマ≈,∽で误刁できます。
	  毋: Z{z3 = 1, z4 = x10} z3に1を洛掐し、z4にx10を洛掐します。

	颅し换や苞き换が蝗えます。
	  毋1: Z{z1 = 5 + 2} z1に7を洛掐します。
	  毋2: Z{z1 = 5 - 2} z1に3を洛掐します。

	颅し换や苞き换面に恃眶叹を崔めることができます。
	  毋1: Z{z1 = z0 + 2} z1にz0 + 2を洛掐します。
	  毋2: Z{z1 = 5 - z12} z1に5 - z12を洛掐します。

	年眶'C'および'R'が蝗えます。
	  毋: A C10 Z{z1 = C, z2 = R} z1に10を洛掐し、z2に0を洛掐します。

  zn	恃眶。(0″n″255)  恃眶遍换コマンド'Z'と圭わせて蝗います。

	恃眶の蝗脱毋:
	  Z{z0 = 0} [ @z0 c4 Z{z0 = z0 + 1} ]127

 眶猛の遍换
	驴くのコマンドにおいては、≈+∽および≈-∽淡规を蝗って
	眶猛を颅したり苞いたりすることが材墙です。
	  毋¨y10+22,50-15 ∈あまり紊い毋ではありませんが、遍换ができる
	  ことを绩しました∷

 SMFメタイベントによる矢机误の叫蜗。
	笆布に绩す WT,WI,WL,WM,WCコマンドにより、筛洁MIDIファイルに
	メモや参混などを叫蜗することができます。
	(泣塑胳矢机を蝗う眷圭、涩妥に炳じてMML2MID悸乖箕のオプションスイッチ
	 -mを回年しないと疙瓢侯する眷圭があります。2鞠徊救)

  WT"テキスト" メモなどのテキスト矢机を淡揭します。
	       SMFメタイベント FF 01 により叫蜗されます。

  WI"弛达叹"   弛达叹を淡揭します。
	       SMFメタイベント FF 04 により叫蜗されます。

  WL"参混"     参混を淡揭します。
	       SMFメタイベント FF 05 により叫蜗されます。

  WM"マ〖カ〖" リハ〖サルˇマ〖クやセクション叹を淡揭します。
	       SMFメタイベント FF 06 により叫蜗されます。

  WC"キュ〖ˇポイント"
	       キュ〖ポイント霹のメモ今きを淡揭します。
	       SMFメタイベント FF 07 により叫蜗されます。

	(庙) これらもMMLコマンドの1硷ですので、トラック叹の稿ろに淡揭し
	て布さい。もし乖片に≈WL "参混"∽のように今くと、≈WトラックとL
	トラックのデ〖タが今かれていて、その面にいきなり矢机误が附れてい
	る∽という豺坚になってエラ〖になります。


ˇ笆布は·奠バ〖ジョンとの高垂拉のために荒されているコマンドですˉ
  なるべく蝗わないで布さいˉ

  \n	蒂射に'&'を烧けた'rn&'と链く票霹に胺われますˉ

  /	ル〖プアウト':'と票じですˉ

  BBn	陵滦ベンドですˉBS+nやBS-nと票じですˉ

  *n	啪拇の陵滦コマンドですˉ__nと票じですˉ
	v5.26笆稿では≈#bc525∽回年を乖わない嘎り蝗えません(≈*∽はナチュラル
	の罢蹋になります)。


3.4.3 泼检なコマンド

  =n	遍琳スイッチ∈nは0または1。nを臼维してもよい∷
	このコマンドは、トラックの嘲に弥いてください。
	つまり、乖片に弥いてください。
	このコマンドは、链てのトラックに滦して跟蔡がかかります。

	≈MMLの庞面までをスキップして、妒を庞面から棠らしたい∽という妥司に
	炳えるためのコマンドです。
	ただ帽にMMLのある婶尸をコメントアウトすると、その婶尸で不咖が
	恃わったり不翁が恃わったりしていると、妒を赖撅に棠らせません。
	そのような眷圭には、'=n'コマンドが舔に惟ちます。

	'=1'が回年されると、それ笆惯の不射と蒂射のコンパイルをスキップします。
	'=0'が回年された箕爬で、傅の遍琳觉轮に提ります。
	蒂射と不射がスキップされている粗に恃构されたボリュ〖ム、オクタ〖ブ、
	ベロシティなどの链ての猛は、'=0'が回年された木稿に瓤鼻されます。
	介袋觉轮は'=0'です。
	'=n'のnを臼维して回年した眷圭は、'=0'および'=1'の觉轮を蛤高に
	磊り垂えます。
	また、'=n'は、トラックの面に弥くことも办炳できます。その眷圭は、
	そのトラックだけに跟蔡が漂きます。

[毋]

A ∧
B ∧
C ∧

=1

A ∧   <-- この３乖の遍琳が若ばされる。ボリュ〖ム、オクタ〖ブ、
B ∧   <-- ベロシティなどのあらゆる猛の恃步は'=0'の木稿に瓤鼻される。
C ∧   <-- 墓い妒を虑ち哈む眷圭に、庞面を若ばせるので守网です。

=0

A ∧
B ∧
C ∧

  \	乖琐の≈\∽(庙坚柒を近く)は费鲁乖を山します。肌の乖が、あたかも
	その乖の鲁きにあるかのように胺われます。泼に、肌の乖でエラ〖が叫た
	眷圭も、その乖でエラ〖が叫たかのように山绩されますので(附哼の惹
	では)、庙罢して布さい。



3.5 その戮の怠墙

  嘲婶のプリプロセッサとの息啡怠墙があります(奶撅は、ユ〖ザが汤绩弄に蝗
う涩妥はないと蛔います)。
  MMLファイル面に

    # 眶 "叹涟"

という妨の乖があった眷圭、それ笆稿でエラ〖が弹きると、mml2midはあたかも
その≈叹涟∽のファイルでエラ〖があったかのように鼠桂します。≈#∽は乖片
になければなりません。
  毋えば≈# 19 "foo.mid"∽という乖があり、その乖の4乖黎でエラ〖が弹きた
眷圭、mml2midは≈foo.midというファイルの22(=19+4-1)乖誊でエラ〖が弹きた∽
と鼠桂します。
  mml2midへの嘲婶プリプロセッサを侯喇する眷圭、叫蜗面にこの妨の攫鼠を虽
め哈むようにしておけば、mml2midが鼠桂するエラ〖メッセ〖ジが、プリプロセッ
サへの掐蜗となった络塑のファイルを徊救するような妨にすることができます
(4.2で揭べるmmlppはその毋になっています)。


4. mml2mid毁辩ツ〖ル凡

4.1 エディタとの息啡

  PC-98高垂怠惧でVZエディタを蝗脱している眷圭と、UNIX惧でmuleを蝗脱して
いる眷圭は、mml2midとエディタを息啡させ、エディタの面からワンタッチでmml
をコンパイルしたりそれを遍琳したりする缄檬が脱罢されています。

	PC-98+VZ脱∧mmldef.txt(mml2midのア〖カイブに票涵)
	UNIX+mule脱∧marmalade(mml2midのWebペ〖ジで侍芹邵)

4.2 mml2mid脱プリプロセッサ

  墓い叹涟のマクロ、苞眶を艰るマクロを悸附するmml2midのプリプロセッサ
mmlppが脱罢されています。mml2midのア〖カイブに票涵してあります。

4.3 mml2mid脱GUI

  WindowsおよびUNIX惧で、コマンドライン惹mml2midと驶脱することにより
mml2midのグラフィカルインタフェ〖スを悸附する、tkmml2midというものが脱罢
されています。これもmml2midのア〖カイブに票涵です。


  その戮にも、さまざまな毁辩ツ〖ルをmml2midのWebペ〖ジで芹邵しています。


5ˉ侯荚

  嚏拍肚客 ∈もんでん あきと∷
  email:	  akito-m@is.aist-nara.ac.jp

  疲版建践 ∈ＭＫＲ¨ ふじい ひでき∷
  email:	  hfujii@platz.jp

  辊拍底沦 ∈くろだ ひさやす∷
  email:	  kuroda@platz.jp

  糠叫景欠 ∈にいで なおゆき∷
  email:	  nide@ics.nara-wu.ac.jp


バグの回纽、鹅攫、炊鳞などは纯忿します。
布淡のMML2MID Web Pageにあります啼い圭わせフォ〖ムをご网脱布さい。

MML2MID Web Pageは、http://hpc.jp/~mml2mid/ です。

MMLの怠墙をフルに蝗ったサンプルMML∈オリジナル妒∷も淑礁面です。
叉こそはと蛔う数はぜひぜひ告炳淑布さい。

なお、塑プログラムを网脱した冯蔡栏じたいかなる稍网弊に滦しても碰数は
办磊勒扦を积ちません。
